<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        let stock = {
            'fruits':[
                'strawberry','grapes','banana','apple'
            ],
            'liquid':[
                'water','ice'
            ],
            'holder':[
                'cone','cup','stick'
            ],
            'toppings':[
                'chocolate','sprinkles'
            ]
        }
        

        let is_shop_open = false;


        function time(ms){
            return new Promise(
                (resolve,reject)=>{
                    if(is_shop_open){
                        setTimeout(resolve,ms)
                    }else{
                        reject(console.log('shop have closed'))
                    }
                }
            )
        }

        async function kitchen(){
            try{
                await time(20)
                console.log(`fruit is ${stock.fruits[0]}`)
                await time(2000)
                console.log('cut the fruit')
                await time(1000)
                console.log(`add ${stock.liquid[0]} and ${stock.liquid[1]}`)
                await time(1000)
                console.log('start the machine')
                await time(2000)
                console.log(`holder is ${stock.holder[0]}`)
                await time(3000)
                console.log(`topping is ${stock.toppings[0]}`)
                await time(2000)
                console.log('serve ice cream')
            }catch(error){
                console.log('customer left',error)
            }finally{
                console.log('day ended, shop is closed')
            }
        }
       
        kitchen();

    </script>
</body>
</html>